<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ­ è‹±è¯­å¤§å†’é™©ï¼šå…¨è‡ªé€‚åº”ç‰ˆ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        :root { --girl: #ff78b0; --boy: #4facfe; }
        
        * { box-sizing: border-box; }

        body { 
            background: linear-gradient(180deg, #87CEEB 0%, #8BC34A 100%);
            min-height: 100vh; margin: 0; font-family: 'Microsoft YaHei', sans-serif;
            display: flex; flex-direction: column; align-items: center; 
            padding: 10px; overflow-x: hidden;
        }

        /* é¡¶éƒ¨çŠ¶æ€æ è‡ªé€‚åº” */
        .hud {
            display: flex; gap: 15px; background: rgba(255, 255, 255, 0.95);
            padding: 10px 20px; border-radius: 50px; margin-top: 5px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); border: 3px solid #fff;
            max-width: 100%; align-items: center;
        }
        .team { font-size: clamp(14px, 4vw, 24px); font-weight: bold; padding: 5px 12px; border-radius: 20px; cursor: pointer; white-space: nowrap; }
        .active { background: #fff; box-shadow: 0 0 10px rgba(0,0,0,0.2); transform: scale(1.05); }
        
        /* æ ¸å¿ƒæ¸¸æˆæ¿è‡ªé€‚åº” */
        #game-board {
            position: relative; 
            width: 95vw; 
            max-width: 950px; 
            height: 60vh; 
            max-height: 500px;
            background: rgba(255, 255, 255, 0.4); border-radius: 20px;
            border: 5px solid white; margin-top: 15px;
            overflow: hidden;
        }

        .node {
            position: absolute; width: clamp(35px, 8vw, 55px); height: clamp(35px, 8vw, 55px); 
            border-radius: 25%; display: flex; align-items: center; justify-content: center;
            font-size: clamp(12px, 3vw, 20px); z-index: 5; font-weight: bold;
        }
        .n-odd { background: #FFEB3B; color: #856404; }
        .n-even { background: #FF9800; color: white; }
        .n-spec { background: #FF5252 !important; color: white !important; border: 2px solid white; }

        .pawn {
            width: clamp(25px, 6vw, 45px); height: clamp(25px, 6vw, 45px); 
            border-radius: 20%; position: absolute; z-index: 10;
            border: 2px solid white; box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transition: all 0.4s ease-out; font-size: clamp(18px, 5vw, 30px);
            display: flex; align-items: center; justify-content: center;
        }

        /* æŒ‰é’®è‡ªé€‚åº” */
        #roll-btn {
            margin-top: 15px; padding: 12px 20%; font-size: clamp(20px, 5vw, 28px);
            background: #FF5722; color: white; border: none; border-radius: 50px;
            cursor: pointer; box-shadow: 0 5px 0 #BF360C; width: 80%; max-width: 300px;
        }

        /* å¼¹çª—è‡ªé€‚åº” */
        #modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 100; justify-content: center; align-items: center; padding: 20px; }
        .quiz-card { background: #FFF; padding: 20px; border-radius: 30px; border: 6px solid #FFEB3B; text-align: center; width: 100%; max-width: 500px; }
        #question { font-size: clamp(20px, 6vw, 32px); margin: 15px 0; color: #333; word-wrap: break-word; }
        .btn-group { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; }
        .btn-group button { border: none; padding: 10px 15px; border-radius: 12px; color: white; font-size: 16px; cursor: pointer; flex: 1; min-width: 80px; }

        /* è·èƒœå±‚ */
        #win-overlay { display: none; position: fixed; inset: 0; background: white; z-index: 200; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 20px; }
        .win-title { font-size: clamp(40px, 10vw, 80px); color: #FF9800; margin-bottom: 10px; }
        
        /* é’ˆå¯¹æ‰‹æœºç«–å±çš„å¾®è°ƒ */
        @media (max-aspect-ratio: 1/1) {
            #game-board { height: 70vh; }
            .node { width: 45px; height: 45px; }
        }
    </style>
</head>
<body>

    <div class="hud">
        <div id="team-0" class="team active" onclick="editTeamName(0)" style="color: var(--girl);">ğŸ± å–µå–µç»„</div>
        <div id="dice-ui" style="font-size: 28px;">ğŸ²</div>
        <div id="team-1" class="team" onclick="editTeamName(1)" style="color: var(--boy);">ğŸ¶ æ±ªæ±ªç»„</div>
    </div>

    <div id="game-board"></div>

    <button id="roll-btn" onclick="startRolling()">GO! ğŸ²</button>

    <div id="modal">
        <div class="quiz-card">
            <h2 id="modal-team" style="font-size: 18px; color: #FF9800;">æŒ‘æˆ˜æ—¶é—´</h2>
            <div id="question">é¢˜åº“åŠ è½½ä¸­...</div>
            <div id="answer-display" style="display:none; font-size: 20px; color: #2e7d32; margin-bottom: 10px;"></div>
            <div class="btn-group">
                <button onclick="handle(true)" style="background:#4CAF50;">ç­”å¯¹ âœ…</button>
                <button onclick="revealAnswer()" style="background:#FFC107; color: #856404;">ç­”æ¡ˆ ğŸ“–</button>
                <button onclick="handle(false)" style="background:#F44336;">åŠ æ²¹ ğŸ’¡</button>
            </div>
        </div>
    </div>

    <div id="win-overlay">
        <div style="font-size: 80px;">ğŸ†</div>
        <div id="winner-name" class="win-title">è·èƒœç»„å</div>
        <button onclick="location.reload()" style="padding: 15px 40px; font-size: 20px; background: #4CAF50; color: white; border: none; border-radius: 50px;">é‡æ–°å¼€å§‹</button>
    </div>

<script>
    const sfx = {
        dice: new Audio('assets/sfx/dice_roll.mp3'),
        jump: new Audio('assets/sfx/jump.mp3'),
        hole: new Audio('assets/sfx/hole_fall.mp3'),
        snake: new Audio('assets/sfx/snake_attack.mp3'),
        plane: new Audio('assets/sfx/plane_fly.mp3'),
        wrong: new Audio('assets/sfx/wrong_ans.mp3'),
        win: new Audio('assets/sfx/winner_cheer.mp3')
    };

    function stopSounds() { Object.values(sfx).forEach(a => { a.pause(); a.currentTime = 0; }); }

    function editTeamName(i) {
        const n = prompt("è¾“å…¥ç»„åï¼š", i===0?"å–µå–µç»„":"æ±ªæ±ªç»„");
        if(n) document.getElementById('team-'+i).innerText = n;
    }

    const traps = {
        5: { icon: 'âœˆï¸', type: 'plane', move: 30, msg: "é£æœºç›´è¾¾ç»ˆç‚¹ï¼" },
        14: { icon: 'ğŸ', type: 'snake', move: -4, msg: "åé€€4æ ¼" },
        22: { icon: 'ğŸ•³ï¸', type: 'hole', move: 5, msg: "ç©¿è¶Šå‰è¿›5æ ¼ï¼" }
    };

    let questions = [{q: "å¤§å†™å­—æ¯'A'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "a"},
  {q: "å°å†™å­—æ¯'b'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "B"},
  {q: "å¤§å†™å­—æ¯'C'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "c"},
  {q: "ç‹—çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "dog"},
  {q: "çŒ«çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "cat"},
  {q: "çº¢è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "red"},
  {q: "è“è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "blue"},
  {q: "æ•°å­—'1'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "one"},
  {q: "æ•°å­—'5'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "five"},
  {q: "è·‘æ­¥çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "run"},
  {q: "é•¿é¢ˆé¹¿çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "giraffe"},
  {q: "å¤§å†™å­—æ¯'E'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "e"},
  {q: "å°å†™å­—æ¯'f'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "F"},
  {q: "å¤§è±¡çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "elephant"},
  {q: "è€è™çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "tiger"},
  {q: "é»„è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "yellow"},
  {q: "ç»¿è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "green"},
  {q: "æ•°å­—'3'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "three"},
  {q: "æ•°å­—'8'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "eight"},
  {q: "è·³è·ƒçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "jump"},
  {q: "'ä½ å¥½'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "hello"},
  {q: "å¤§å†™å­—æ¯'G'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "g"},
  {q: "å°å†™å­—æ¯'h'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "H"},
  {q: "ç‹®å­çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "lion"},
  {q: "çŒ´å­çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "monkey"},
  {q: "æ©™è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "orange"},
  {q: "ç´«è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "purple"},
  {q: "æ•°å­—'2'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "two"},
  {q: "æ•°å­—'10'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "ten"},
  {q: "èµ°è·¯çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "walk"},
  {q: "ç†ŠçŒ«çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "panda"},
  {q: "å¤§å†™å­—æ¯'I'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "i"},
  {q: "å°å†™å­—æ¯'j'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "J"},
  {q: "ç†Šçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "bear"},
  {q: "å…”å­çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "rabbit"},
  {q: "é»‘è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "black"},
  {q: "ç™½è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "white"},
  {q: "æ•°å­—'4'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "four"},
  {q: "æ•°å­—'12'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "twelve"},
  {q: "æ¸¸æ³³çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "swim"},
  {q: "'è°¢è°¢'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "thank you"},
  {q: "å¤§å†™å­—æ¯'K'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "k"},
  {q: "å°å†™å­—æ¯'l'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "L"},
  {q: "é¸Ÿçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "bird"},
  {q: "é±¼çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "fish"},
  {q: "ç²‰è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "pink"},
  {q: "æ£•è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "brown"},
  {q: "æ•°å­—'6'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "six"},
  {q: "æ•°å­—'15'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "fifteen"},
  {q: "å”±æ­Œçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "sing"},
  {q: "æ–‘é©¬çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "zebra"},
  {q: "å¤§å†™å­—æ¯'M'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "m"},
  {q: "å°å†™å­—æ¯'n'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "N"},
  {q: "é’è›™çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "frog"},
  {q: "é¸­å­çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "duck"},
  {q: "ç°è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "gray"},
  {q: "é‡‘è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "gold"},
  {q: "æ•°å­—'7'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "seven"},
  {q: "æ•°å­—'18'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "eighteen"},
  {q: "è·³èˆçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "dance"},
  {q: "'å¯¹ä¸èµ·'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "sorry"},
  {q: "å¤§å†™å­—æ¯'O'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "o"},
  {q: "å°å†™å­—æ¯'p'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "P"},
  {q: "é©¬çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "horse"},
  {q: "çŒªçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "pig"},
  {q: "é“¶è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "silver"},
  {q: "æ•°å­—'9'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "nine"},
  {q: "æ•°å­—'20'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "twenty"},
  {q: "åƒçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "eat"},
  {q: "ç‰›çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "cow"},
  {q: "å¤§å†™å­—æ¯'Q'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "q"},
  {q: "å°å†™å­—æ¯'r'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "R"},
  {q: "ç»µç¾Šçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "sheep"},
  {q: "è€é¼ çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "mouse"},
  {q: "æ•°å­—'11'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "eleven"},
  {q: "æ•°å­—'13'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "thirteen"},
  {q: "å–çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "drink"},
  {q: "'å†è§'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "goodbye"},
  {q: "å¤§å†™å­—æ¯'S'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "s"},
  {q: "å°å†™å­—æ¯'t'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "T"},
  {q: "æµ·è±šçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "dolphin"},
  {q: "è´è¶çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "butterfly"},
  {q: "æ•°å­—'14'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "fourteen"},
  {q: "æ•°å­—'16'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "sixteen"},
  {q: "é˜…è¯»çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "read"},
  {q: "ä¹Œé¾Ÿçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "turtle"},
  {q: "å¤§å†™å­—æ¯'U'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "u"},
  {q: "å°å†™å­—æ¯'v'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "V"},
  {q: "è¢‹é¼ çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "kangaroo"},
  {q: "ä¼é¹…çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "penguin"},
  {q: "æ•°å­—'17'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "seventeen"},
  {q: "æ•°å­—'19'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "nineteen"},
  {q: "ç¡è§‰çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "sleep"},
  {q: "'è¯·'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "please"},
  {q: "å¤§å†™å­—æ¯'W'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "w"},
  {q: "å°å†™å­—æ¯'x'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "X"},
  {q: "ç‹ç‹¸çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "fox"},
  {q: "ç‹¼çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "wolf"},
  {q: "å­¦ä¹ çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "study"},
  {q: "'æˆ‘æœ‰ä¸€æ”¯çº¢è‰²çš„é“…ç¬”'ç”¨è‹±è¯­æ€ä¹ˆè¯´ï¼Ÿ", a: "I have a red pencil."},
  {q: "Helloçš„ä¸­æ–‡æ˜¯ï¼Ÿ", a: "ä½ å¥½"}];
    let game = { pts: [], pos: [0, 0], turn: 0, moving: false, curA: "" };

    async function loadExcel() {
        try {
            const r = await fetch('é¢˜åº“.xlsx');
            const d = new Uint8Array(await r.arrayBuffer());
            const b = XLSX.read(d, {type:'array'});
            const j = XLSX.utils.sheet_to_json(b.Sheets[b.SheetNames[0]]);
            questions = j.map(i => ({q: "å¤§å†™å­—æ¯'A'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "a"},
  {q: "å°å†™å­—æ¯'b'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "B"},
  {q: "å¤§å†™å­—æ¯'C'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "c"},
  {q: "ç‹—çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "dog"},
  {q: "çŒ«çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "cat"},
  {q: "çº¢è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "red"},
  {q: "è“è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "blue"},
  {q: "æ•°å­—'1'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "one"},
  {q: "æ•°å­—'5'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "five"},
  {q: "è·‘æ­¥çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "run"},
  {q: "é•¿é¢ˆé¹¿çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "giraffe"},
  {q: "å¤§å†™å­—æ¯'E'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "e"},
  {q: "å°å†™å­—æ¯'f'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "F"},
  {q: "å¤§è±¡çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "elephant"},
  {q: "è€è™çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "tiger"},
  {q: "é»„è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "yellow"},
  {q: "ç»¿è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "green"},
  {q: "æ•°å­—'3'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "three"},
  {q: "æ•°å­—'8'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "eight"},
  {q: "è·³è·ƒçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "jump"},
  {q: "'ä½ å¥½'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "hello"},
  {q: "å¤§å†™å­—æ¯'G'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "g"},
  {q: "å°å†™å­—æ¯'h'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "H"},
  {q: "ç‹®å­çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "lion"},
  {q: "çŒ´å­çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "monkey"},
  {q: "æ©™è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "orange"},
  {q: "ç´«è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "purple"},
  {q: "æ•°å­—'2'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "two"},
  {q: "æ•°å­—'10'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "ten"},
  {q: "èµ°è·¯çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "walk"},
  {q: "ç†ŠçŒ«çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "panda"},
  {q: "å¤§å†™å­—æ¯'I'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "i"},
  {q: "å°å†™å­—æ¯'j'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "J"},
  {q: "ç†Šçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "bear"},
  {q: "å…”å­çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "rabbit"},
  {q: "é»‘è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "black"},
  {q: "ç™½è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "white"},
  {q: "æ•°å­—'4'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "four"},
  {q: "æ•°å­—'12'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "twelve"},
  {q: "æ¸¸æ³³çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "swim"},
  {q: "'è°¢è°¢'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "thank you"},
  {q: "å¤§å†™å­—æ¯'K'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "k"},
  {q: "å°å†™å­—æ¯'l'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "L"},
  {q: "é¸Ÿçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "bird"},
  {q: "é±¼çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "fish"},
  {q: "ç²‰è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "pink"},
  {q: "æ£•è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "brown"},
  {q: "æ•°å­—'6'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "six"},
  {q: "æ•°å­—'15'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "fifteen"},
  {q: "å”±æ­Œçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "sing"},
  {q: "æ–‘é©¬çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "zebra"},
  {q: "å¤§å†™å­—æ¯'M'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "m"},
  {q: "å°å†™å­—æ¯'n'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "N"},
  {q: "é’è›™çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "frog"},
  {q: "é¸­å­çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "duck"},
  {q: "ç°è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "gray"},
  {q: "é‡‘è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "gold"},
  {q: "æ•°å­—'7'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "seven"},
  {q: "æ•°å­—'18'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "eighteen"},
  {q: "è·³èˆçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "dance"},
  {q: "'å¯¹ä¸èµ·'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "sorry"},
  {q: "å¤§å†™å­—æ¯'O'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "o"},
  {q: "å°å†™å­—æ¯'p'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "P"},
  {q: "é©¬çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "horse"},
  {q: "çŒªçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "pig"},
  {q: "é“¶è‰²çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "silver"},
  {q: "æ•°å­—'9'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "nine"},
  {q: "æ•°å­—'20'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "twenty"},
  {q: "åƒçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "eat"},
  {q: "ç‰›çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "cow"},
  {q: "å¤§å†™å­—æ¯'Q'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "q"},
  {q: "å°å†™å­—æ¯'r'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "R"},
  {q: "ç»µç¾Šçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "sheep"},
  {q: "è€é¼ çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "mouse"},
  {q: "æ•°å­—'11'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "eleven"},
  {q: "æ•°å­—'13'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "thirteen"},
  {q: "å–çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "drink"},
  {q: "'å†è§'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "goodbye"},
  {q: "å¤§å†™å­—æ¯'S'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "s"},
  {q: "å°å†™å­—æ¯'t'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "T"},
  {q: "æµ·è±šçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "dolphin"},
  {q: "è´è¶çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "butterfly"},
  {q: "æ•°å­—'14'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "fourteen"},
  {q: "æ•°å­—'16'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "sixteen"},
  {q: "é˜…è¯»çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "read"},
  {q: "ä¹Œé¾Ÿçš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "turtle"},
  {q: "å¤§å†™å­—æ¯'U'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "u"},
  {q: "å°å†™å­—æ¯'v'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "V"},
  {q: "è¢‹é¼ çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "kangaroo"},
  {q: "ä¼é¹…çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "penguin"},
  {q: "æ•°å­—'17'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "seventeen"},
  {q: "æ•°å­—'19'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "nineteen"},
  {q: "ç¡è§‰çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "sleep"},
  {q: "'è¯·'çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "please"},
  {q: "å¤§å†™å­—æ¯'W'å¯¹åº”çš„å°å†™å­—æ¯æ˜¯ï¼Ÿ", a: "w"},
  {q: "å°å†™å­—æ¯'x'å¯¹åº”çš„å¤§å†™å­—æ¯æ˜¯ï¼Ÿ", a: "X"},
  {q: "ç‹ç‹¸çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "fox"},
  {q: "ç‹¼çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "wolf"},
  {q: "å­¦ä¹ çš„è‹±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ", a: "study"},
  {q: "'æˆ‘æœ‰ä¸€æ”¯çº¢è‰²çš„é“…ç¬”'ç”¨è‹±è¯­æ€ä¹ˆè¯´ï¼Ÿ", a: "I have a red pencil."},
  {q: "Helloçš„ä¸­æ–‡æ˜¯ï¼Ÿ", a: "ä½ å¥½"}));
        } catch(e) {}
    }

    function initMap() {
        const board = document.getElementById('game-board');
        const bW = board.clientWidth, bH = board.clientHeight;
        for(let i=0; i<30; i++) {
            const row = Math.floor(i/10);
            const col = (row % 2 === 0) ? i%10 : 9-(i%10);
            // å…³é”®ï¼šä½¿ç”¨ç™¾åˆ†æ¯”åæ ‡å®ç°å“åº”å¼
            const x = (col * 9 + 5) + "%";
            const y = (row * 30 + 15) + "%";
            game.pts.push({x, y});
            const node = document.createElement('div');
            node.className = `node ${traps[i]?'n-spec':(i%2===0?'n-even':'n-odd')}`;
            node.style.left = x; node.style.top = y;
            node.innerHTML = traps[i] ? traps[i].icon : i;
            board.appendChild(node);
        }
        render();
    }

    function render() {
        [0, 1].forEach(i => {
            const pt = game.pts[game.pos[i]];
            let el = document.getElementById('pawn-'+i);
            if(!el) {
                el = document.createElement('div'); el.id = 'pawn-'+i; el.className = 'pawn';
                el.innerHTML = i===0?"ğŸ±":"ğŸ¶"; el.style.backgroundColor = i===0?"var(--girl)":"var(--boy)";
                document.getElementById('game-board').appendChild(el);
            }
            // ç¨å¾®åç§»é˜²æ­¢é‡å 
            el.style.left = `calc(${pt.x} + ${i*2}vw)`; 
            el.style.top = pt.y;
        });
    }

    async function startRolling() {
        if(game.moving) return;
        stopSounds(); game.moving = true;
        document.getElementById('roll-btn').disabled = true;
        sfx.dice.play();
        const s = Math.floor(Math.random()*6)+1;
        document.getElementById('dice-ui').innerText = s;
        for(let i=0; i<s; i++) {
            if(game.pos[game.turn] >= 29) break;
            game.pos[game.turn]++; sfx.jump.play(); render();
            await new Promise(r => setTimeout(r, 400));
        }
        const q = questions[Math.floor(Math.random()*questions.length)];
        document.getElementById('question').innerText = q.q; game.curA = q.a;
        document.getElementById('answer-display').style.display = 'none';
        document.getElementById('modal').style.display = 'flex';
    }

    function revealAnswer() {
        document.getElementById('answer-display').innerText = "ç­”æ¡ˆï¼š" + game.curA;
        document.getElementById('answer-display').style.display = 'block';
    }

    function handle(correct) {
        document.getElementById('modal').style.display = 'none';
        if(correct) {
            const t = traps[game.pos[game.turn]];
            if(t) {
                if(t.type==='plane') { sfx.plane.play(); game.pos[game.turn]=29; }
                else { game.pos[game.turn] = Math.max(0, Math.min(29, game.pos[game.turn]+t.move)); t.move>0?sfx.hole.play():sfx.snake.play(); }
                render();
            }
        } else { sfx.wrong.play(); }

        if(game.pos[game.turn] >= 29) {
            sfx.win.play();
            document.getElementById('winner-name').innerText = document.getElementById('team-'+game.turn).innerText + " è·èƒœï¼";
            document.getElementById('win-overlay').style.display = 'flex';
        } else {
            game.turn = 1 - game.turn; game.moving = false;
            document.getElementById('roll-btn').disabled = false;
            document.getElementById('team-0').className = 'team '+(game.turn===0?'active':'');
            document.getElementById('team-1').className = 'team '+(game.turn===1?'active':'');
        }
    }

    window.onload = async () => { await loadExcel(); initMap(); };
</script>
</body>
</html>